version: 2

models: 
  - name: stg_customers
    description: Staged customer data from our jaffle shop app.
    columns: 
      - name: customer_id
        description: The primary key for customers.
        tests:
            - unique
            - not_null

  - name: stg_orders
    description: Staged order data from jaffle shop app. 
    columns:
      - name: order_id
        description: Primary key for orders.
        tests:
          - unique
          - not_null
      - name: status
        description: "{{ doc('order_status')}}"
        tests:
            - accepted_values:
                values: # can also pass these as a list ['completed', 'shipped', 'returned', 'return_pending', 'placed']
                    - completed
                    - shipped
                    - returned
                    - return_pending
                    - placed
      - name: customer_id
        description: Foreign key to stg_customers.customer_id. 
        tests:
          - relationships: # tests for each customer_id in the orders model exists in the customers table
              to: ref('customers') 
              field: id
